@using RoastMeApplication.Models.Entities;
@using RoastMeApplication.Models.DAL;
@{
    ViewBag.Title = "Home Page";
    List<Picture> pictures = this.ViewBag.Pictures as List<Picture>;
    int page;
    if (Request.RequestContext.RouteData.Values["page"]!=null)
    {
        page = int.Parse(Request.RequestContext.RouteData.Values["page"].ToString());
    }else
    {
        page = 0;
    }
    List<Comment> comments = new List<Comment>();
}
<p>test</p>
<div class="page-header row">
    <h3 class="text-warning"><span class="glyphicon glyphicon-fire"></span>Roast Feed</h3>

    <h5><a><span class="glyphicon glyphicon-time"></span> Recent</a>    <a class="text-danger"><span class="glyphicon glyphicon-heart"></span> Popular</a></h5>
</div>


@if (pictures != null && pictures.Count != 0)
{
    if (pictures.Count >= 5)
    {
        foreach (Picture p in pictures.GetRange(page, page + 4))
        {
            <div class="row">
                <a href="#">
                <div class="picture_index col-md-6">
                    <h3>@p.Caption</h3>
                    <h3>@p.Participant.Username</h3>
                    <hr />
                    <img class="img-circle" src="~/Content/Images/@p.ImagePath" alt="Caption" height="450" width="450" />
                     @{
                         comments = p.Comments.ToList();

                      }
                     @if (comments != null && comments.Count != 0)
                     {
                         foreach (Comment c in comments)
                         {
                            <p>@c.Message</p>
                         }
                     }
                     @*<h4>...</h4>*@
                 </div>
                 </a>
            </div>
                             }
                         }
                         else
                         {
                             foreach (Picture p in pictures)
                             {
                                <div class="row">
                                    <a href="#">
                                        <div class="picture_index">
                                            <div id="userInfo">
                                                <p id="index_username">@p.Participant.Username</p>
                                                <p id="index_caption">@p.Caption</p>
                                            </div>
                                            
                                            
                                            <hr />
                                            <img class="img-circle" src="~/Content/Images/@p.ImagePath" alt="Caption" height="450" width="450" />
                                            @{
                                                comments = p.Comments.ToList();

                                            }
                                            @if (comments != null && comments.Count != 0)
                                            {
                                                foreach (Comment c in comments)
                                                {
                                                    <p>@c.Message</p>
                                                }
                                            }
                                            @*<h4>...</h4>*@
                                            <hr />
                                        </div>
                                    </a>
                                </div>
                                                        }
                                                    }
                                                }

@{
    int nb_page =0;
    if (pictures.Count % 2 == 0)
    {
        nb_page = pictures.Count/2;
    }
    else
    {
        nb_page = pictures.Count/2+1;
    }
}
<div>
    @{
        for (int i = 0;i < nb_page; i++)
        {
            <a href="#" class="page">@i</a>
        }
    }
</div>

<div id="black-background"></div>
<div id="main">
    <div id="picture">
        <img src=""/>
    </div>
    <div id="comment">
        @if (comments != null && comments.Count != 0)
        {
            foreach (Comment c in comments)
            {
                <p>@c.Message</p>
            }
        }
    </div>

</div>
